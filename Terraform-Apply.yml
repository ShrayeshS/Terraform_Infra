steps:
  - task: TerraformTaskV4@4
    displayName: Terraform Apply
    #condition: and(succeeded(), eq(variables['TERRAFORM_PLAN_HAS_CHANGES'],'true'))
    inputs:
      provider: 'azurerm' # The Terraform provider to use for applying changes to Azure resources.
      command: 'apply' 
      commandOptions: '$(System.DefaultWorkingDirectory)/terraformenv.tfplan'  # The path to the Terraform plan file generated by a previous 'terraform plan' operation.
      environmentServiceNameAzureRM: $(AzureSubscriptionServiceConnectionName) # The name of the Azure Resource Manager service connection used for authentication and accessing Azure resources.